@model Task_Management_Platform.Models.Team
@{
    ViewBag.Title = "Afisare Echipa";
}

@if (TempData["message"] != null)
{
    <div class="alert @TempData["messageType"]">
        @TempData["message"]
    </div>
}

<div class="card">

    <h2>@ViewBag.Title</h2>

    <br />

    <p>@Model.TeamName</p>


    
    <form method="post" action="/Teams/AddProject/@Model.Id">
        <button class="btn btn-primary" type="submit">Adauga proiect</button>
    </form>

    @if (ViewBag.EsteAdmin == true)
    {
        <form method="post" action="/Teams/Delete/@Model.Id">

            <button class="btn btn-danger" type="submit">Sterge echipa</button>

        </form>


        <form method="POST" asp-controller="Teams" asp-action="AddUser">
            <input type="hidden" name="TeamId" value="@Model.Id" />
            <div class="d-flex flex-row justify-content-center p-3 border-1 border-top">
                <div>
                    <select name="UserId" class="form-control">
                        <option selected>Adaugati un user in echipa</option>
                        @foreach (var user in ViewBag.UserTeams)
                        {
                            <option value="@user.Id" style="color:blue">@user.UserName</option>
                            <div>@user.FirstName</div>
                        }
                    </select>
            </div>
            <div>
                <input type="submit" class="btn btn-success alert-success" value="+" />
            </div>
        </div>
    </form>
    }

    @*afisare proiectele echipei*@
    @if (Model.Projects.Count() != 0)
    {
        @foreach (var project in Model.Projects)
        {
            <div class="card">

                <div class="col-4 mb-4">
                    <div class="card" style="width: 100%;">
                        @*<img src="..." class="card-img-top" alt="..."> *@

                        <div class="card-body">

                            <h5 class="card-title" name="Name">@project.Name</h5>


                            <br />

                            <a class="btn alert-success" href="/Projects/Show/@project.Id">Detalii proiect</a>


                        </div>
                    </div>
                </div>

            </div>

            <br />
            <br />
        }
    }

    <br />
    <a class="btn alert-success" href="/Teams/Index/">Afisati lista tuturor echipelor</a>

    <br />
    <hr />
    <br />
</div>